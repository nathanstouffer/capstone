\section{Background}
\label{sec:background}

\subsection{Blockchain}

At a high level, a blockchain is a sequence of blocks that is immutable in practical applications.
Immutability in blockchains is often provided through Proof of Work.
Proof of Work was introduced in \cite{dwork1992PoW} and first used for blockchain in the Bitcoin whitepaper \cite{nakamoto2009Bitcoin}.
In a Proof of Work blockchain, a block is valid if its cryptographic hash is below a preset threshold.
Each block primarily consists of data that cannot change (financial transactions, medical records, etc).
However, every block contains a field for a fixed-length string of bits that make the output of the hash function below the threshold.
The fixed-length string is called a nonce.
If someone finds a nonce, they have ``mined'' a block.
Since the hash function is cryptographic, it is difficult to reverse.
The best strategy for someone mining a block is to guess and check nonces until a sufficiently low output is found.
Figure \ref{fig:blockchain} displays the typical structure of a blockchain.

\input{tikz/blockchain}

A broader perspective of a blockchain is an implementation of a finite state machine.
In the state machine, blocks are transitions between the states of applications running on top of a blockchain.
Abstractly, the $k^{th}$ block $B_k$ is a transition from state $S_{k-1}$ to state $S_k$ with certain validity requirements.
See Figure \ref{fig:statemachine} for a visual.
A tangible example is a cryptocurrency.
Cryptocurrencies realize state as a record of the amount of currency each public key controls.
Blocks are a set of transactions that transfer currency between public keys.
In state $S_0$, no one controls any currency.
Then block $B_1$ moves the blockchain to $S_1$ where its miner controls some newly created currency.
Then block $B_2$ grants cryptocurrency to its miner and contains currency transfers between users of the currency.
This process repeats until state $S_n$ is reached, which contains the current account-balance pairs of all the current users of a cryptocurrency.

\input{tikz/state}

\subsection{Technical Problem}

To understand the technical problem, we must understand two properties of blockchains.
First, we observe that miners must have every block in the chain to contribute new blocks.
And, second, blockchains grow in perpetuity.
These properties mean that new miners must download and process an ever increasing amount of data as time passes.
Even now, when Bitcoin is just over a decade old, it can take days or weeks to become a miner.
Such a barrier prevents some nodes from mining, limiting decentralization.
Less decentralization reduces the effectiveness of a blockchain.

When viewing a blockchain as a finite state machine, we can change the requirements of what a miner needs to know.
All a miner must know is a state $S_k$ and every block following that state.
Then a bootstrapping miner could compute the current state.
If $S_k$ is close to the end of the chain, then the miner requires significantly less bootstrapping time by only requesting blocks following $S_k$.

How does a bootstrapping miner obtain the state $S_k$?
They can't just ask a blockchain node, because they could receive a faulty state.
This is the problem we would like to solve: Can we provide a mechanism so that a bootstrapping node can trust a recent state?

\subsection{Related Work}

% lightweight nodes in the bitcoin whitepaper

% summary block in the main chain

% miniblockchain

% separate summary chain

% coinprune 

Our solution gains inspiration from a paper written by Matzutt et al. that provides a way to verify Bitcoin states.
They suggest that recent miners be allowed to vote for a state and then bootstrapping nodes trust the majority of votes.
Each vote is recorded in a block and each block has the capacity to store a single vote \cite{matzutt2020HowTSPrune}.
Storing votes in blocks gives them immutability, so a bootstrapping node knows that they are counting every vote.

There are two problems with this idea.
First, a vote can only be generated as quickly as new blocks.
In Bitcoin, this averages to about 10 minutes per block, meaning a bootstrapping node might have to wait a week for there to be sufficiently many votes to trust a state.
Second, this solution relies on implementation details in the Bitcoin protocol and may not apply to blockchains in general.
